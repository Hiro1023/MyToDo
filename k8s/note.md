
### 1. **Ingressの設定と正しいパスの指定**
   - **問題点**: `Ingress` リソースのパス設定が正しくなく、正規表現やパスの解釈の違いによりエラーが発生。
   - **解決策**: Ingressの設定で、パスに正規表現を使わず、`pathType: Prefix` とし、具体的なパスを直接指定することで解決しました。

### 2. **リクエストのリライト設定**
   - **問題点**: `nginx.ingress.kubernetes.io/rewrite-target` アノテーションが原因で、すべてのリクエストがルート (`/`) にリライトされてしまい、バックエンドがリクエストを正しく受け取れない状況。
   - **解決策**: リライト設定を空文字に設定し、`/todos` や `/todos/<id>` のようなパスがそのままバックエンドに送信されるように変更しました。

### 3. **バックエンドのエンドポイントが解釈されない問題**
   - **問題点**: Ingressの設定やアノテーションの影響で、バックエンドのエンドポイントが `/` 以外のパス（`/todos` や `/todos/<id>`）でリクエストを受け取れず、`405 Method Not Allowed` エラーが返される状況。
   - **解決策**: リライト設定を削除してリクエストがバックエンドに直接転送されるようにしたところ、Flaskバックエンドで意図通りのエンドポイントが解釈されるようになりました。

### 4. **Flaskのロギング設定**
   - **問題点**: Flaskアプリケーション内で `logging.basicConfig` が `AttributeError` で失敗。
   - **解決策**: Flaskでは `logging.basicConfig` ではなく `app.logger` を使うのが一般的であるため、Flaskアプリケーションのロギング方法を見直しました。

### 5. **`nginx-controller`でのログ確認**
   - **目的**: `nginx-controller` のログを確認することで、Ingressルールが適切に処理されているか、リクエストがどのように処理されているかを確認。
   - **手順**: `kubectl logs -n ingress-nginx <nginx-controller-pod-name>` コマンドを使用して `nginx-controller` のログを確認しました。これにより、リクエストが正しく処理されているか、またエラーメッセージがないかをチェックしました。
   - **結果**: `nginx-controller`のログから、リクエストが正しくルーティングされていない原因を特定し、Ingressの設定を微調整する助けになりました。

### 6. **トラブルシューティングの方法**
   - Ingressの設定を確認するために、`kubectl describe ingress` でIngressリソースの状態を確認。
   - `kubectl logs` コマンドを使って、`nginx-controller`およびバックエンドのログを確認し、エラーの原因を特定。

